<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Canvas Example</title>
<style>
    body, html {
    margin: 0;
    padding: 0;
    overflow: hidden; /* Hide scrollbars */
    height: 100%; /* Ensure body and html fill the full height */
    width: 100%;
}

#myCanvas { /* Changed from myCanvas to #myCanvas (ID selector) */
        display: block; 
        width: 100%;  /* Stretches the canvas horizontally */
        height: 100%; /* Stretches the canvas vertically */
    }
</style>
    
</head>

<body>
    <div id="colorStatus">Hover over the canvas to see the color (RGBA): </div>
    <br>
    <canvas id="myCanvas"></canvas> <!-- Removed fixed width/height attributes -->
    
    <script>
        // Get the canvas element and its 2D rendering context
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();

        // --- SCALING LOGIC ADDED HERE ---
        function resizeCanvas() {
            // Set the canvas's drawing buffer size to its actual displayed size
            canvas.width = canvas.clientWidth;
            canvas.height = canvas.clientHeight;
            
            // Redraw content after resize, as the canvas is cleared when dimensions change
            ctx.fillStyle = 'green';
            ctx.fillRect(10, 10, 100, 50);
            const img = new Image();
            img.src = 'maze.png'; // Must be a URL that supports CORS
            img.onload = function() {
            ctx.drawImage(img, 0, 0);}

        }

        // Call resize initially and on window resize events
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // Initial call

        
        
    
        // 2. Add a mousemove event listener
        canvas.addEventListener('mousemove', function(event) {
            // Get mouse coordinates relative to the canvas
            const rect = canvas.getBoundingClientRect();
            // Coordinates calculation remains correct
            const x = Math.floor(event.clientX - rect.left);
            const y = Math.floor(event.clientY - rect.top);
            
            const imageData = ctx.getImageData(x, y, 1, 1);
            const pixelColor = imageData.data;
            const r = pixelColor[0];
            const g = pixelColor[1];
            const b = pixelColor[2];
            const a = pixelColor[3]; // Alpha value (0-255)
            
            if (g < 230 && r < 230 && b < 230) { 

                const death = window.open(
                            'second_window_content.html', 
                            'secondWindow', 
                            'width=100,height=100'
                );

            }
            document.getElementById('colorStatus').textContent = `Hover over the canvas to see the color (RGBA): (${r}, ${g}, ${b}, ${a})`;
        });
document.addEventListener('mouseleave', function (event) {
    // Check if the mouse left the entire window (relatedTarget is null or outside the document)
    // Note: The relatedTarget check is more reliable for ensuring it's not just moving between elements
    if (event.relatedTarget === null || event.relatedTarget === undefined) {
                const death = window.open(
                            'second_window_content.html', 
                            'secondWindow', 
                            'width=100,height=100'
                );
    }
});
    </script>
</body>
</html>
